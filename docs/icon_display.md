# 图标显示

## 背景
早期版本存在“离开应用后图标残留”、“应用/文件夹/文件高度不一致”等问题，长名称文件显得很突兀。

## 目标
1. 列表图标与桌面实际一致（含隐藏/快捷方式解析）。
2. 避免 `.lnk`、文件夹重复，并保持扩展名、类型判断正确。
3. 列表尺寸、阴影、模糊一致，长名称时也不割裂。

## 解决策略
1. **可靠采集**  
   - 扫描桌面路径时优先用 Windows Shell API 解析 `.lnk`、文件夹、文件，写入 `ShortcutItem`。  
   - 过滤指向文件夹的 `.lnk`，避免重复；缺省图标时尝试从目标提取，失败则使用占位。  
2. **刷新与同步**  
   - 定时轮询 `isDesktopIconsVisible()`，同步系统隐藏/显示状态并刷新 `ShortcutStore`。  
   - `findMainFlutterWindowHandle()` 与 `isCursorOverWindowHandle()` 结合使用，自动隐藏时能用原生 HWND 判断鼠标是否在窗口内，避免高 DPI 坐标误差。  
   - “显示隐藏文件”“隐藏桌面图标”切换后强制刷新列表。  
3. **UI 统一**  
   - 所有快捷入口统一用 `ShortcutCard` 展示图标、文字、阴影、尺寸。  
   - `GlassContainer`、`NavigationRail` 等控件保持边框/模糊一致，让长名称在不同列表看起来协调。  

如需扩展其他来源的图标展示，可在现有采集和刷新逻辑上补充数据源或占位符样式。
